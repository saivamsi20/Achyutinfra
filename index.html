<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>What We Do Slider</title>
    <link rel="stylesheet" href="doop.css" />
  </head>
  <body>
    <div class="slider-container">
      <div class="slider-header">
        <!-- <h2>achyut gallary</h2> -->
        <div class="slider-nav">
          <button class="slider-btn prev">&lt;</button>
          <button class="slider-btn next">&gt;</button>
        </div>
      </div>

      <div class="slider-wrapper">
        <div class="slider-track">
          <div
            class="card-item"
            data-images='[
              "https://cdn.pixabay.com/photo/2022/12/01/04/42/man-7628305_1280.jpg", 
              "https://cdn.pixabay.com/photo/2024/05/09/08/07/ai-generated-8750166_1280.jpg", 
              "https://cdn.pixabay.com/photo/2023/03/15/20/46/homeless-man-7855421_1280.jpg"
            ]'
          >
            <div class="card">
              <img
                src="images/homepage-2/portfolio/portfolio-01.jpg"
                alt="Infrastructure"
                class="card-img"
              />
              <div class="card-content">
                <h3 class="card-title">Infrastructure</h3>
                <p class="card-subtitle">
                  Empowering mobility, fueling progress
                </p>
                <a href="#" class="card-button">READ MORE</a>
              </div>
            </div>
          </div>

          <div
            class="card-item"
            data-images='[
              "https://cdn.pixabay.com/photo/2022/12/01/04/42/man-7628305_1280.jpg","https://cdn.pixabay.com/photo/2024/05/09/08/07/ai-generated-8750166_1280.jpg","https://cdn.pixabay.com/photo/2023/03/15/20/46/homeless-man-7855421_1280.jpg"
            ]'
          >
            <div class="card">
              <img
                src="images/homepage-2/portfolio/portfolio-02.jpg"
                alt="Energy"
                class="card-img"
              />
              <div class="card-content">
                <h3 class="card-title">Energy</h3>
                <p class="card-subtitle">Powering progress, energising India</p>
                <a href="#" class="card-button">READ MORE</a>
              </div>
            </div>
          </div>

          <div
            class="card-item"
            data-images='[
              "https://images.unsplash.com/photo-1583220498735-3a6e46a782a1?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=774&q=80",
              "https://images.unsplash.com/photo-1560518883-ce09059eeffa?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1073&q=80",
              "https://images.unsplash.com/photo-1600585154340-be6161a56a0c?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
            ]'
          >
            <div class="card">
              <img
                src="images/homepage-2/portfolio/portfolio-03.jpg"
                alt="Real Estate"
                class="card-img"
              />
              <div class="card-content">
                <h3 class="card-title">Real Estate</h3>
                <p class="card-subtitle">
                  Homes that inspire, spaces that endure
                </p>
                <a href="#" class="card-button">READ MORE</a>
              </div>
            </div>
          </div>

          <div
            class="card-item"
            data-images='[
              "https://images.unsplash.com/photo-1542621334-a254cf47763b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
              "https://images.unsplash.com/photo-1556742044-53c853e4815a?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80",
              "https://images.unsplash.com/photo-1579566346927-26d3d3f898f3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1170&q=80"
            ]'
          >
            <div class="card">
              <img
                src="images/homepage-2/portfolio/portfolio-04.jpg"
                alt="Logistics"
                class="card-img"
              />
              <div class="card-content">
                <h3 class="card-title">Logistics</h3>
                <p class="card-subtitle">
                  Connecting businesses, delivering value
                </p>
                <a href="#" class="card-button">READ MORE</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // --- Main Slider Logic ---
        const track = document.querySelector(".slider-track");
        if (!track) return;

        const slides = Array.from(track.children);
        const nextButton = document.querySelector(".slider-btn.next");
        const prevButton = document.querySelector(".slider-btn.prev");

        let currentIndex = 0;
        let visibleSlides = getVisibleSlides();

        function getVisibleSlides() {
          if (window.innerWidth <= 768) return 1;
          if (window.innerWidth <= 992) return 2;
          return 3;
        }

        function updateSlider() {
          visibleSlides = getVisibleSlides();
          const slideWidth = slides[0].getBoundingClientRect().width;
          track.style.transform = `translateX(-${slideWidth * currentIndex}px)`;
          updateButtonStates();
        }

        function moveToSlide(targetIndex) {
          if (targetIndex < 0) {
            targetIndex = 0;
          } else if (targetIndex > slides.length - visibleSlides) {
            targetIndex = slides.length - visibleSlides;
          }
          const slideWidth = slides[0].getBoundingClientRect().width;
          track.style.transform = `translateX(-${slideWidth * targetIndex}px)`;
          currentIndex = targetIndex;
          updateButtonStates();
        }

        function updateButtonStates() {
          if (!prevButton || !nextButton) return;
          prevButton.disabled = currentIndex === 0;
          nextButton.disabled = currentIndex >= slides.length - visibleSlides;

          prevButton.style.opacity = prevButton.disabled ? "0.5" : "1";
          prevButton.style.cursor = prevButton.disabled
            ? "not-allowed"
            : "pointer";
          nextButton.style.opacity = nextButton.disabled ? "0.5" : "1";
          nextButton.style.cursor = nextButton.disabled
            ? "not-allowed"
            : "pointer";
        }

        nextButton.addEventListener("click", () => {
          if (!nextButton.disabled) moveToSlide(currentIndex + 1);
        });
        prevButton.addEventListener("click", () => {
          if (!prevButton.disabled) moveToSlide(currentIndex - 1);
        });
        window.addEventListener("resize", updateSlider);
        updateButtonStates();

        // --- NEW: Image Slideshow on Hover Logic ---
        const cardItems = document.querySelectorAll(".card-item");

        cardItems.forEach((item) => {
          const img = item.querySelector(".card-img");
          if (!img) return;

          const imagesAttr = item.dataset.images;
          if (!imagesAttr) return;

          try {
            const images = JSON.parse(imagesAttr);
            const originalSrc = img.src;
            let hoverInterval;
            let imageIndex = 0;

            if (images && images.length > 1) {
              item.addEventListener("mouseenter", () => {
                // Start slideshow on hover
                hoverInterval = setInterval(() => {
                  imageIndex = (imageIndex + 1) % images.length;
                  img.src = images[imageIndex];
                }, 1000); // Change image every 1 second
              });

              item.addEventListener("mouseleave", () => {
                // Stop slideshow and reset image
                clearInterval(hoverInterval);
                img.src = originalSrc;
                imageIndex = 0;
              });
            }
          } catch (e) {
            console.error("Could not parse data-images attribute:", item, e);
          }
        });
      });
    </script>
  </body>
</html>
